<%- include('../includes/adminHeader.ejs') %>s
                    <div class="main-content">
                        <!-- main-content-wrap -->
                        <div class="main-content-inner">
                            <!-- main-content-wrap -->
                            <div class="main-content-wrap">
                                <div class="flex items-center flex-wrap justify-between gap20 mb-27">
                                    <h3>Report</h3>
                                    <ul class="breadcrumbs flex items-center flex-wrap justify-start gap10">
                                        <li>
                                            <a href="/dashboard"><div class="text-tiny">Dashboard</div></a>
                                        </li>
                                        <li>
                                            <i class="icon-chevron-right"></i>
                                        </li>
                                        <li>
                                            <div class="text-tiny">Report</div>
                                        </li>
                                    </ul>
                                </div>
                                
                                <div class="tf-section-3 mb-30">
                                    <!-- chart-default -->
                                    <div class="wg-chart-default">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap14">
                                                <div>
                                                    <div class="body-text mb-2">Customer Name</div>
                                                    <h6><%= user.name %></h6>
                                                </div>
                                               
                                            </div>
                                        </div>
                                    </div>
                                  
                                    <!-- /chart-default -->
                                    <!-- chart-default -->
                                    <div class="wg-chart-default">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap14">
                                             
                                                <div>
                                                    <div class="body-text mb-2">Customer Email</div>
                                                    <h6><%= user.email %></h6>
                                                </div>
                                            </div>
                                            
                                        </div>
                                        <div class="wrap-chart">
                                            <div id="line-chart-12"></div>
                                        </div>
                                    </div>
                                    <!-- /chart-default -->
                                    <!-- chart-default -->
                                    <div class="wg-chart-default">
                                        <div class="flex items-center justify-between">
                                            <div class="flex items-center gap14">
                                              
                                                <div>
                                                    <div class="body-text mb-2">Total Orders</div>
                                                    <h4><%= orders.length %></h4>
                                                </div>
                                            </div>
                                            <div class="box-icon-trending">
                                                <i class="icon-trending-up"></i>
                                                <div class="body-title number">x.xx%</div>
                                            </div>
                                        </div>
                                        <div class="wrap-chart">
                                            <div id="line-chart-13"></div>
                                        </div>
                                    </div>
                                    <!-- /chart-default -->
                                </div>
                                <div class="tf-section-2 mb-30">
                                    <!-- seller-statistic -->
                                    <div class="wg-box">
                                        <div class="flex items-center justify-between">
                                            <h5>Cart Items</h5>
                                        </div>
                                        <div class="flex flex-wrap gap40">
                                            <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                    <th scope="col">Product Name</th>
                                                    <th scope="col">Quantity</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% user.cart.forEach(function(item) { %>
                                                    <tr>
                                                        <td><%= item.product_id.name %></td>
                                                        <td><%= item.quantity %></td>
                                                    </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div id="line-chart-14"></div>
                                    </div>
                                    <!-- /seller-statistic -->
                                    <!-- total-sale -->
                                    <div class="wg-box">
                                        <div class="flex items-center justify-between">
                                            <h5>Wishlist</h5>
                                            <div class="flex gap10">
                                                <div class="select w160 ">
                                                    <select class="h40">
                                                        <option>Ascending</option>
                                                        <option>Descending</option>
                                                      
                                                    </select>
                                                </div>
                                                <a class="tf-button-download" href="#"><i class="icon-download-cloud"></i></a>
                                            </div>
                                        </div>
                                        <div class="flex flex-wrap gap40">
                                               <table class="table table-striped">
                                                <thead>
                                                    <tr>
                                                    <th scope="col">Product Name</th>
                                                    <th scope="col">Quantity</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% user.cart.forEach(function(item) { %>
                                                    <tr>
                                                        <td><%= item.product_id.name %></td>
                                                        <td><%= item.quantity %></td>
                                                    </tr>
                                                    <% }); %>
                                                </tbody>
                                            </table>
                                        </div>
                                        <div id="line-chart-8"></div>
                                    </div>
                                    <!-- /total-sale -->
                                </div>
                                <!-- sale-purchase -->
                                <div class="wg-box mb-30">
                                    <div class="">
                                        <h5>Total Order Value</h5>
                                        <div class="flex gap10">
                                            <h4><%= totalOrderAmount %></h4>
                                            <!-- <div class="box-icon-trending down">
                                                <i class="icon-trending-down"></i>
                                                <div class="body-title number">x.xx%</div>
                                            </div> -->
                                        </div>
                                    </div>
                                    <div id="line-chart-15"></div>
                                    <div id="line-chart-16"></div>
                                </div>
                                <!-- /sale-purchase -->
                                <!-- history -->
                                <div class="wg-box">
                                    <h5>Transfer History</h5>
                                    
                                            <div class="wg-table table-all-attribute">
                                                <ul class="table-title flex gap20 mb-14">
                                                    <li>
                                                        <div class="body-title">Order Id</div>
                                                    </li>    
                                                    <li>
                                                        <div class="body-title">Order Status</div>
                                                    </li>
                                                    <li>
                                                        <div class="body-title">Date</div>
                                                    </li>
                                                    <li>
                                                        <div class="body-title">Amount</div>
                                                    </li>
                                                    <li>
                                                        <div class="body-title">Action</div>
                                                    </li>
                                                </ul>

                                                 <% if (orders.length > 0) { %>
                                                    <% orders.forEach(orderItem => { %> 
                                                <ul class="flex flex-column">
                                                  
                                                    <li class="attribute-item flex items-center justify-between gap20">
                                                        <div class="body-text">#<%- orderItem._id.toString().substring(0, 5) %>...</div>
                                                        <div class="body-text"><%- orderItem.status %></div>
                                                        <div class="body-text"><%- new Date(orderItem.created_at).toLocaleDateString('en-IN') %></div>
                                                        <div class="body-text">â‚¹ <%= orderItem.total_amount.toFixed(2) %></div>
                                                        <div class="list-icon-function">
                                                             <a href="/dashboard/order-detail/<%= orderItem._id %>">
                                                                <div class="item eye">
                                                                    <i class="icon-eye"></i>
                                                                </div>
                                                            </a>
                                                             <div>
                                                                <a href="/dashboard/order-tracking/<%= orderItem._id %>">
                                                                   <img width="20" height="20" src="https://img.icons8.com/color-glass/48/delivery-tracking.png" alt="delivery-tracking"/>
                                                                </a>
                                                            </div>
                                                          
                                                        </div>
                                                    </li>
                                                   
                                                </ul>
                                                 <% }); %>
                                        <% } else { %>
                                                <li>No Orders Found</li>
                                        <% } %>
                                            </div>
                                       
                                    <div class="divider"></div>
                                    <div class="flex items-center justify-between flex-wrap gap10">
                                        <div class="text-tiny">Showing Page <%= currentPage %> of Total <%= totalPages %> Pages</div>
                                        <ul class="wg-pagination">
                                            <li>
                                                <a href="#"><i class="icon-chevron-left"></i></a>
                                            </li>

                                            <% for(let i = 1; i <= totalPages; i++) { %>
                                                <li class="<%= currentPage == i ? 'active' : '' %>">
                                                    <a href="/dashboard/user-report/<%= user._id %>?page=<%= i %>&search=<%= search %>"><%= i %></a>
                                                  
                                                </li>
                                            <% } %>
                                            <li>
                                                <a href="#"><i class="icon-chevron-right"></i></a>
                                            </li>
                                        </ul>
                                    </div>
                                </div>
                                <!-- /history -->
                            </div>
                            <!-- /main-content-wrap -->
                        </div>
                        <!-- /main-content-wrap -->
                        <!-- bottom-page -->
                        <%- include('../includes/adminFooter.ejs') %>
                        <!-- /bottom-page -->
                   